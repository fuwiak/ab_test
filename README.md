# А/Б Тестирование - Анализ Кампании Премиум Брони

## Обзор Проекта
Анализ результатов А/Б теста кампании скидок на премиум броню в командном онлайн-шутере. Цель - определить, следует ли внедрить кампанию скидок на постоянной основе, основываясь на её влиянии на ключевые метрики дохода.

## Структура Проекта
```
AB_test/
├── data/                           # CSV файлы данных
│   ├── ABgroup.csv                # Назначения групп игроков
│   ├── Cash.csv                   # Траты внутриигровой валюты
│   ├── Cheaters.csv               # Известные читеры
│   ├── Money.csv                  # Платежи реальными деньгами
│   └── Platforms.csv              # Игровые платформы (PC, PS4, Xbox)
├── src/                           # Исходный код
│   ├── data_loader.py             # Утилиты загрузки данных
│   ├── data_loader_logged.py      # Загрузка данных с логированием
│   ├── data_cleaner.py            # Очистка данных и удаление читеров
│   ├── ab_analysis.py             # Основной анализ А/Б тестирования
│   ├── full_analysis_logged.py    # Полный анализ с логированием
│   ├── logger_config.py           # Настройка логирования
│   ├── export_results.py          # Экспорт результатов
│   ├── create_visualizations.py   # Создание всех графиков
│   └── create_final_excel.py      # Создание итогового Excel отчёта
├── visualizations/                # 📊 Графики и визуализации
│   ├── 01_metrics_comparison.png  # Сравнение основных метрик
│   ├── 02_confidence_intervals.png # Доверительные интервалы
│   ├── 03_platform_analysis.png   # Анализ по платформам
│   ├── 04_statistical_significance.png # Статистическая значимость
│   ├── 05_revenue_projection.png  # Проекция дохода
│   ├── 06_data_quality.png        # Качество данных
│   └── 07_interactive_dashboard.html # Интерактивный dashboard
├── reports/                       # Отчёты и результаты анализа
│   ├── ab_test_final_results_*.xlsx # Excel отчёты с результатами
│   └── Финальная_работа_AB_тест_*.xlsx # Итоговый Excel файл
├── logs/                          # Логи анализа
│   ├── analysis_detailed_*.log    # Детальные логи анализа
│   └── console_output_*.log       # Вывод консоли
├── notebooks/                     # Jupyter блокноты
│   └── ab_testing_analysis.ipynb  # Интерактивный анализ
├── Финальные_результаты_и_графики.md # 📋 Итоговый отчёт
├── Статистика_для_финальной_работы.md # 📊 Статистический анализ
├── Итоговая_сводка_файлов.md      # 📝 Сводка всех файлов
├── Agent.md                       # Документация процесса
└── requirements.txt               # Python зависимости
```

## ✅ СТАТУС: АНАЛИЗ ЗАВЕРШЁН

### 🎯 Ключевые Метрики (Проанализированы)
- **ARPU** (Средний доход на пользователя): Общий доход / Все пользователи
- **ARPPU** (Средний доход на платящего пользователя): Общий доход / Только платящие пользователи
- **Траты Внутриигровой Валюты**: Паттерны использования виртуальной валюты

### 📊 Основные Результаты Анализа

#### Группа A (Контрольная):
- **ARPU**: $3.73
- **ARPPU**: $23.23
- **Средние траты валюты**: 3,018 монет

#### Группа B (Тестовая - Скидка):
- **ARPU**: $4.39 (+17.7% ↗️)
- **ARPPU**: $26.84 (+15.5% ↗️)
- **Средние траты валюты**: 3,474 монет (+15.1% ↗️)

#### 📈 Статистическая Значимость:
- **ARPU**: p < 0.001 (высоко значимо)
- **ARPPU**: p < 0.001 (высоко значимо)
- **Траты валюты**: p < 0.001 (высоко значимо)

## 🔍 Этапы Анализа (Завершены)

### 1. Загрузка Данных ✅
```python
from src.data_loader_logged import DataLoader
loader = DataLoader()
data = loader.load_all_data()
```

### 2. Очистка Данных ✅
- Удалены известные читеры из cheaters.csv (1,174 пользователя)
- Обнаружены потенциальные читеры с помощью статистического анализа выбросов (IQR метод)
- Проверены распределения А/Б групп

```python
from src.data_cleaner import DataCleaner
cleaner = DataCleaner(data)
cleaned_data = cleaner.remove_known_cheaters()
potential_cheaters = cleaner.detect_potential_cheaters(cleaned_data['cash'])
final_data = cleaner.remove_potential_cheaters(potential_cheaters)
```

### 3. А/Б Анализ ✅
- Рассчитаны ARPU, ARPPU и траты валюты по группам и платформам
- Созданы 95% доверительные интервалы
- Проведены тесты статистической значимости

```python
from src.full_analysis_logged import ABTestAnalyzer
analyzer = ABTestAnalyzer(final_data)
analyzer.calculate_metrics()
analyzer.perform_statistical_tests()
```

### 4. Экспорт Результатов ✅
- Excel таблицы с ARPU по группам и платформам
- Результаты статистических тестов
- Анализ доверительных интервалов
- Интерактивные визуализации

## 📊 Созданные Визуализации

### 🎨 Графики для Отчёта:
1. **Сравнение метрик** - основные KPI между группами
2. **Доверительные интервалы** - статистическая надёжность
3. **Анализ по платформам** - эффективность по PC/PS4/Xbox
4. **Статистическая значимость** - результаты t-тестов
5. **Проекция дохода** - потенциальное увеличение выручки
6. **Качество данных** - процесс очистки от читеров
7. **Интерактивный dashboard** - комплексный обзор результатов

## 🚀 Установка и Запуск

### 1. Создание виртуального окружения:
```bash
python3 -m venv .venv
source .venv/bin/activate  # На Windows: .venv\Scripts\activate
```

### 2. Установка зависимостей:
```bash
pip install -r requirements.txt
```

## ▶️ Запуск Анализа

### Вариант 1: Полный Анализ (Рекомендуется)
```bash
cd src
python full_analysis_logged.py
```

### Вариант 2: Пошаговый Запуск
```bash
cd src
python data_loader_logged.py    # Загрузка и проверка данных
python data_cleaner.py          # Очистка данных и удаление читеров
python ab_analysis.py           # Полный А/Б анализ
```

### Вариант 3: Создание Визуализаций
```bash
cd src
python create_visualizations.py  # Создание всех графиков
python create_final_excel.py    # Создание итогового Excel
```

### Вариант 4: Интерактивный Анализ
Используйте Jupyter блокноты в папке `notebooks/` для интерактивного исследования.

## 📋 Готовые Результаты

### 1. **📊 Статистический Отчёт** содержит:
   - Сравнения ARPU/ARPPU между тестовой и контрольной группами
   - 95% доверительные интервалы для всех метрик
   - Анализ по платформам (PC, PS4, Xbox)
   - Результаты тестов статистической значимости

### 2. **📈 Excel Таблицы** включают:
   - ARPU по группам и платформам
   - Детальная разбивка метрик
   - Размеры выборок и статистическая мощность
   - 7 листов с полной статистикой

### 3. **🎨 Визуализации** содержат:
   - Тренды ежедневных метрик
   - Сравнения групп
   - Различия в производительности платформ
   - Интерактивный dashboard

### 4. **💡 Рекомендации** по:
   - Внедрению кампании скидок на постоянной основе
   - Модификации структуры кампании
   - Прекращению кампании

## 🎯 Ключевые Выводы

### ✅ **РЕКОМЕНДАЦИЯ: ВНЕДРИТЬ КАМПАНИЮ**

1. **Значительное увеличение ARPU** на 17.7% (статистически значимо)
2. **Рост ARPPU** на 15.5% среди платящих пользователей
3. **Увеличение трат валюты** на 15.1%
4. **Все различия статистически значимы** (p < 0.001)
5. **Положительный эффект на всех платформах**
6. **Потенциальное увеличение дохода** на миллионы долларов

### 📊 Анализ по Платформам:
- **PC**: Наибольший прирост ARPU (+18.2%)
- **PS4**: Стабильное улучшение всех метрик
- **Xbox**: Хороший отклик на кампанию

## 📝 Примечания
- Все методы обнаружения и удаления читеров задокументированы
- Доверительные интервалы помогают определить статистическую значимость различий
- Анализ по платформам выявил важные сегментно-специфичные инсайты
- Размеры выборок и статистическая мощность учтены в финальных рекомендациях
- Все логи сохранены для воспроизводимости результатов

## 📁 Файлы для Финальной Работы
- `Финальные_результаты_и_графики.md` - Полный отчёт (5 разделов)
- `visualizations/` - Все графики для включения в работу
- `reports/Финальная_работа_AB_тест_*.xlsx` - Excel с 7 листами статистики
- `src/` - Исходный код с комментариями на русском языке 